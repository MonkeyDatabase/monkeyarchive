---
layout: post
title: Web进阶题-ics-06
excerpt: "攻防世界进阶Web题目-ics-06"
date:   2020-10-14 21:33:00
categories: [CTF]
comments: true
---

## 我的解题过程

1. 题目描述，"云平台报表中心收集了设备管理基础服务的数据，但是数据被删除了，只有一处留下了入侵者的痕迹。"
2. 访问网站，只有"云平台报表中心"有一个日期范围的输入框，同时有一个GET参数id
3. 通过Burp Suite抓包发现，日期范围的输入框中输入数据，点击确认时其实是没有发起请求的，所以注入点尽可能是在id这个位置
4. 使用sqlmap对id进行扫描，未发现问题
5. 每次对id赋值，都会*302，Location:?id=1*，跳转到id=1这个参数
6. 访问index.html时，响应头有两个比较特殊，ETag仅是用来标识资源，如果资源标记一致，则服务器只返回响应头，所以应该与本题解题无关

   * ETag: "15df-575a2df2d6840-gzip"
   * Last-Modified: Wed, 12 Sep 2018 01:54:33 GMT
7. 检索通常的设备管理数据库样式

   * 表字段通常是"设备表：id，名称，类别，型号，投运日期，购入日期，制造单位，数量，计量单位，使用部门，安装"，所以本题中的id应该也是类似于设备id的东西。
   * 检索时一般采用了select xxx from device_table where id=$_GET\['id'\]
8. 对id进行探测

   * 输入数字，网页可以正确接收
   * 输入字母，网页重定向到?*id=1*
   * 输入分号，网页重定向到?*id=1*
   * 输入单引号，网页被重定向
   * 输入%，网页被重定向
   * 输入分号，网页正常返回
9. 放弃绕过，使用python生成*0-100000000*的字典，使用Burp Suite的Intruder模块进行爆破，当id=2333时，网页返回内容出现增长，查看网页内容，发现flag，cyberpeace{04777d88787a7b49ae190991de31976a}
10. 提交，答案正确
